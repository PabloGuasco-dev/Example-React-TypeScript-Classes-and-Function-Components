{"ast":null,"code":"class CheckoutCabify {\n  constructor(articles, items) {\n    this.foundArticle = false;\n    this.items = [];\n    this.articles = {};\n    this.articles = articles;\n    this.items = items;\n  }\n\n  scan(code) {\n    const repeatedItem = this.items.find(item => item.code === code);\n\n    if (repeatedItem) {\n      repeatedItem.quantity = repeatedItem.quantity + 1;\n      repeatedItem.price = repeatedItem.price + this.articles[code].price;\n      let newArr = [...this.items];\n      newArr[this.items.indexOf(repeatedItem)] = repeatedItem;\n      this.items = [...newArr];\n      this.foundArticle = true;\n    } else if (this.articles[code]) {\n      const newItem = {\n        code,\n        name: this.articles[code].name,\n        quantity: 1,\n        price: this.articles[code].price\n      };\n      this.items = [...this.items, newItem];\n      this.foundArticle = true;\n    }\n\n    return this;\n  }\n\n  total() {\n    let sum = 0;\n\n    for (let i = 0; i < this.items.length; i += 1) {\n      if (this.items[i].code === 'MUG' && this.items[i].quantity > 1) {\n        sum += ~~(this.items[i].quantity / 2) * this.articles[this.items[i].code].price;\n\n        if (this.items[i].quantity % 2 === 1) {\n          sum += this.articles[this.items[i].code].price;\n        }\n      } else if (this.items[i].code === 'TSHIRT' && this.items[i].quantity > 2) {\n        sum += this.items[i].quantity * this.articles[this.items[i].code].price - this.items[i].quantity * this.articles[items[i].code].price * 0.05;\n      } else {\n        sum += this.items[i].quantity * this.articles[this.items[i].code].price;\n      }\n    }\n\n    return sum;\n  }\n\n}\n\nexport default CheckoutCabify;","map":{"version":3,"names":["CheckoutCabify","constructor","articles","items","foundArticle","scan","code","repeatedItem","find","item","quantity","price","newArr","indexOf","newItem","name","total","sum","i","length"],"sources":["/Users/pguasco/Projects/challenge-cabify/src/entities/checkout.ts"],"sourcesContent":["import type Checkout from './ICheckout';\n\ntype Item  = {\n    code: string,\n    name: string,\n    quantity: number,\n    price: number,\n}\n\nclass CheckoutCabify implements Checkout {\n    foundArticle: boolean = false;\n    items: Item[] = [];\n    articles: Object = {};\n\n    constructor (articles: Object, items: Item[]) {\n        this.articles = articles;\n        this.items = items;\n    }\n\n    scan(code: string): this {\n        const repeatedItem = this.items.find(item => item.code === code)\n        if (repeatedItem) {\n            repeatedItem.quantity = repeatedItem.quantity + 1;\n            repeatedItem.price = repeatedItem.price + this.articles[code].price;\n            let newArr = [...this.items];\n            newArr[this.items.indexOf(repeatedItem)] = repeatedItem;\n            this.items = [...newArr];\n            this.foundArticle = true;\n        } else if (this.articles[code]) {\n            const newItem: Item = {\n                code,\n                name: this.articles[code].name,\n                quantity: 1,\n                price: this.articles[code].price,\n            }\n            this.items = [...this.items, newItem];\n            this.foundArticle = true;\n        }\n        return this;\n    }\n    \n    total(): number {\n        let sum = 0;\n        for (let i = 0; i < this.items.length; i += 1) {\n            if (this.items[i].code === 'MUG' && this.items[i].quantity > 1) {\n                sum += ~~(this.items[i].quantity / 2) * this.articles[this.items[i].code].price;\n                if ((this.items[i].quantity % 2) === 1) {\n                    sum += this.articles[this.items[i].code].price;\n                }\n            } else if (this.items[i].code === 'TSHIRT' && this.items[i].quantity > 2) {\n                sum += (this.items[i].quantity * this.articles[this.items[i].code].price) - ((this.items[i].quantity * this.articles[items[i].code].price) * 0.05);\n            } else {\n                sum += this.items[i].quantity * this.articles[this.items[i].code].price;\n            }\n        }\n        return sum;\n    }\n}\n\nexport default CheckoutCabify;"],"mappings":"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"},"metadata":{},"sourceType":"module"}