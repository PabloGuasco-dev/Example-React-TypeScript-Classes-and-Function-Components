{"ast":null,"code":"class CheckoutCabify {\n  constructor(items, articles) {\n    this.foundArticle = false;\n    this.items = [];\n    this.articles = {};\n    this.items = items;\n    this.articles = articles;\n  }\n\n  scan(code) {\n    const repeatedItem = this.items.find(item => item.code === code);\n\n    if (repeatedItem) {\n      repeatedItem.quantity = repeatedItem.quantity + 1;\n      repeatedItem.price = repeatedItem.price + this.articles[code].price;\n      let newArr = [...this.items];\n      newArr[this.items.indexOf(repeatedItem)] = repeatedItem;\n      this.items = [...newArr];\n      this.foundArticle = true;\n    } else if (this.articles[code]) {\n      const newItem = {\n        code,\n        name: this.articles[code].name,\n        quantity: 1,\n        price: this.articles[code].price\n      };\n      this.items = [...this.items, newItem];\n      this.foundArticle = true;\n    }\n\n    return this;\n  }\n\n  total() {\n    let sum = 0;\n\n    for (let i = 0; i < this.items.length; i += 1) {\n      if (this.items[i].code === 'MUG' && this.items[i].quantity > 1) {\n        sum += ~~(this.items[i].quantity / 2) * this.articles[this.items[i].code].price;\n\n        if (this.items[i].quantity % 2 === 1) {\n          sum += this.articles[this.items[i].code].price;\n        }\n      } else if (this.items[i].code === 'TSHIRT' && this.items[i].quantity > 2) {\n        sum += this.items[i].quantity * this.articles[this.items[i].code].price - this.items[i].quantity * this.articles[items[i].code].price * 0.05;\n      } else {\n        sum += this.items[i].quantity * this.articles[this.items[i].code].price;\n      }\n    }\n\n    return sum;\n  }\n\n}\n\nexport default CheckoutCabify;","map":{"version":3,"names":["CheckoutCabify","constructor","items","articles","foundArticle","scan","code","repeatedItem","find","item","quantity","price","newArr","indexOf","newItem","name","total","sum","i","length"],"sources":["/Users/pguasco/Projects/challenge-cabify/src/entities/checkout.ts"],"sourcesContent":["import type Checkout from './ICheckout';\n\ntype Item  = {\n    code: string,\n    name: string,\n    quantity: number,\n    price: number,\n}\n\nclass CheckoutCabify implements Checkout {\n    foundArticle: boolean = false;\n    items: Item[] = [];\n    articles: Object = {};\n\n    constructor (items:Item[], articles: Object) {\n        this.items = items;\n        this.articles = articles;\n    }\n\n    scan(code: string): this {\n        const repeatedItem = this.items.find(item => item.code === code)\n        if (repeatedItem) {\n            repeatedItem.quantity = repeatedItem.quantity + 1;\n            repeatedItem.price = repeatedItem.price + this.articles[code].price;\n            let newArr = [...this.items];\n            newArr[this.items.indexOf(repeatedItem)] = repeatedItem;\n            this.items = [...newArr];\n            this.foundArticle = true;\n        } else if (this.articles[code]) {\n            const newItem: Item = {\n                code,\n                name: this.articles[code].name,\n                quantity: 1,\n                price: this.articles[code].price,\n            }\n            this.items = [...this.items, newItem];\n            this.foundArticle = true;\n        }\n        return this;\n    }\n    total(): number {\n        let sum = 0;\n        for (let i = 0; i < this.items.length; i += 1) {\n            if (this.items[i].code === 'MUG' && this.items[i].quantity > 1) {\n                sum += ~~(this.items[i].quantity / 2) * this.articles[this.items[i].code].price;\n                if ((this.items[i].quantity % 2) === 1) {\n                    sum += this.articles[this.items[i].code].price;\n                }\n            } else if (this.items[i].code === 'TSHIRT' && this.items[i].quantity > 2) {\n                sum += (this.items[i].quantity * this.articles[this.items[i].code].price) - ((this.items[i].quantity * this.articles[items[i].code].price) * 0.05);\n            } else {\n                sum += this.items[i].quantity * this.articles[this.items[i].code].price;\n            }\n        }\n        return sum;\n    }\n}\n\nexport default CheckoutCabify;"],"mappings":"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"},"metadata":{},"sourceType":"module"}