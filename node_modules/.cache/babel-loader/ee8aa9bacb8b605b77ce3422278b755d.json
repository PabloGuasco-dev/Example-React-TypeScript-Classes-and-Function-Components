{"ast":null,"code":"import _toConsumableArray from\"/Users/pguasco/Projects/challenge-cabify/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/pguasco/Projects/challenge-cabify/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useGetData}from'../hooks/useApiCall.tsx';import Modal from'./modal.tsx';import checkout from'../entities/checkout.ts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CheckoutView=function CheckoutView(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),selectedItem=_useState8[0],setSelectedItem=_useState8[1];var articles={};var co=undefined;articles=useGetData().data;if(articles&&!co){co=new checkout(articles,items);}useEffect(function(){if(articles&&co){setTotal(co.total());}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[items]);var addItem=function addItem(event){if(event.target.value!==\"\"){var _co$scan=co.scan(event.target.value),foundArticle=_co$scan.foundArticle,_items=_co$scan.items;if(foundArticle){setItems(_toConsumableArray(_items));setTimeout(function(){event.target.value=\"\";},200);}}};var reset=function reset(){setItems([]);setTotal(0);};var handleClose=function handleClose(){setShow(false);};var handleShow=function handleShow(item){setSelectedItem(item);setShow(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Insert Code:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"For example: MUG, TSHIRT, CAP...\",onChange:function onChange(event){return addItem(event);},type:\"text\",className:\"form-control\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-table\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"listItem\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items&&items.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{className:\"listItem\",onClick:function onClick(){return handleShow(item);},children:[/*#__PURE__*/_jsx(\"td\",{children:item.code}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:\"...\"})]},item.code);})})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Total: \",total]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:reset,children:\"Reset\"})]}),show&&/*#__PURE__*/_jsx(Modal,{handleClose:handleClose,selectedItem:selectedItem})]});};export default CheckoutView;","map":{"version":3,"names":["React","useEffect","useState","useGetData","Modal","checkout","CheckoutView","items","setItems","total","setTotal","show","setShow","selectedItem","setSelectedItem","articles","co","undefined","data","addItem","event","target","value","scan","foundArticle","setTimeout","reset","handleClose","handleShow","item","map","code","name","quantity","price"],"sources":["/Users/pguasco/Projects/challenge-cabify/src/components/checkout.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useGetData } from '../hooks/useApiCall.tsx';\nimport Modal from './modal.tsx';\nimport checkout from '../entities/checkout.ts'\n\ntype Item  = {\n    code: string,\n    name: string,\n    quantity: number,\n    price: number,\n}\n\nconst CheckoutView = () => {\n    const [items, setItems] = useState<Item[]>([]);\n    const [total, setTotal] = useState<number>(0);\n    const [show, setShow] = useState(false);\n    const [selectedItem, setSelectedItem] = useState()\n\n    let articles: Object = {};\n    let co:checkout = undefined;\n    \n    articles = useGetData().data;\n    \n    if(articles && !co) {\n        co = new checkout(articles, items);\n    }\n\n    useEffect(() => {\n        if(articles && co) {\n            setTotal(co.total());\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [items]);\n\n    const addItem = (event) => {\n        if (event.target.value !== \"\") {\n            const { foundArticle, items } = co.scan(event.target.value);\n            if (foundArticle) {\n                setItems([...items]);\n                setTimeout(() => {\n                    event.target.value = \"\";\n                }, 200)\n            }\n        }\n    }\n\n    const reset = () => {\n        setItems([]);\n        setTotal(0);\n    }\n\n    const handleClose = () => {setShow(false)};\n    const handleShow = (item) => {\n        setSelectedItem(item);\n        setShow(true);        \n    }\n\n    return (\n        <><div className=\"form-group\">\n            <label>Insert Code:</label>\n            <input placeholder=\"For example: MUG, TSHIRT, CAP...\" onChange={(event) => addItem(event)} type=\"text\" className=\"form-control\"></input>\n            <div className=\"container-table\">\n                <table className=\"table\">\n                    <thead>\n                        <tr className='listItem'>\n                            <th>Code</th>\n                            <th>Description</th>\n                            <th>Quantity</th>\n                            <th>Price</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {items && items.map((item) => <tr className='listItem' onClick={() => handleShow(item)} key={item.code}>\n                            <td>{item.code}</td>\n                            <td>{item.name}</td>\n                            <td>{item.quantity}</td>\n                            <td>{item.price}</td>\n                            <td>...</td>\n                        </tr>)}\n                    </tbody>\n                </table>\n                <label>Total: {total}</label>\n            </div>\n            <button type=\"button\" className=\"btn btn-primary\" onClick={reset}>Reset</button>\n        </div>{ show && <Modal handleClose={ handleClose } selectedItem={ selectedItem }>\n                        </Modal>}</>\n    )\n}\n\nexport default CheckoutView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}