{"ast":null,"code":"var _jsxFileName = \"/Users/pguasco/Projects/challenge-cabify/src/Components/checkout.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useGetData } from '../Hooks/useApiCall.tsx';\nimport Modal from './modal.tsx';\nimport CheckoutCabify from '../Classes/checkout-cabify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CheckoutView = () => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [show, setShow] = useState(false);\n  const [selectedItem, setSelectedItem] = useState();\n  let articles = {};\n  const checkoutCabify = new CheckoutCabify(items, articles, setItems);\n  articles = useGetData().data;\n  useEffect(() => {\n    setTotal(checkoutCabify.total); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [items]);\n\n  const addItem = event => {\n    if (event.target.value !== \"\") {\n      const foundArticle = checkoutCabify.scan(event.target.value).foundArticle;\n\n      if (foundArticle) {\n        setTimeout(() => {\n          event.target.value = \"\";\n        }, 200);\n      }\n    }\n  };\n\n  const reset = () => {\n    setItems([]);\n    setTotal(0);\n  };\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const handleShow = item => {\n    setSelectedItem(item);\n    setShow(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Insert Code:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: event => addItem(event),\n        type: \"text\",\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"listItem\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: items && items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"listItem\",\n              onClick: () => handleShow(item),\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 29\n              }, this)]\n            }, item.code, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 55\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Total: \", total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: reset,\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }, this), show && /*#__PURE__*/_jsxDEV(Modal, {\n      handleClose: handleClose,\n      selectedItem: selectedItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true);\n};\n\n_s(CheckoutView, \"GHraPGEJcKrdgJAb/ZKfllwDWQ8=\", false, function () {\n  return [useGetData];\n});\n\n_c = CheckoutView;\nexport default CheckoutView;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutView\");","map":{"version":3,"names":["React","useEffect","useState","useGetData","Modal","CheckoutCabify","CheckoutView","items","setItems","total","setTotal","show","setShow","selectedItem","setSelectedItem","articles","checkoutCabify","data","addItem","event","target","value","foundArticle","scan","setTimeout","reset","handleClose","handleShow","item","map","code","name","quantity","price"],"sources":["/Users/pguasco/Projects/challenge-cabify/src/Components/checkout.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useGetData } from '../Hooks/useApiCall.tsx';\nimport Modal from './modal.tsx';\nimport CheckoutCabify from '../Classes/checkout-cabify'\n\ntype Item  = {\n    code: string,\n    name: string,\n    quantity: number,\n    price: number,\n}\n\ninterface Checkout {\n    foundArticle: boolean;\n    /**\n     * Scans a product adding it to the current cart.\n     * @param code The product identifier\n     * @returns itself to allow function chaining\n     */\n    scan(code: string): this;\n    /**\n     * Returns the value of all cart products with the discounts applied.\n     */\n    total(): number;\n}\n\nconst CheckoutView = () => {\n    const [items, setItems] = useState<Item[]>([]);\n    const [total, setTotal] = useState<number>(0);\n    const [show, setShow] = useState(false);\n    const [selectedItem, setSelectedItem] = useState()\n\n    let articles: any = {};\n\n    const checkoutCabify = new CheckoutCabify(items, articles, setItems);\n\n    articles = useGetData().data;\n\n    useEffect(() => {\n        setTotal(checkoutCabify.total);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [items]);\n\n    const addItem = (event) => {\n        if (event.target.value !== \"\") {\n            const foundArticle = checkoutCabify.scan(event.target.value).foundArticle;\n            if (foundArticle) {\n                setTimeout(() => {\n                    event.target.value = \"\";\n                }, 200)\n            }\n        }\n    }\n\n    const reset = () => {\n        setItems([]);\n        setTotal(0);\n    }\n\n    const handleClose = () => {setShow(false)};\n    const handleShow = (item) => {\n        setSelectedItem(item);\n        setShow(true);        \n    }\n\n    return (\n        <><div className=\"form-group\">\n            <label>Insert Code:</label>\n            <input onChange={(event) => addItem(event)} type=\"text\" className=\"form-control\"></input>\n            <div className=\"container-table\">\n                <table className=\"table\">\n                    <thead>\n                        <tr className='listItem'>\n                            <th>Code</th>\n                            <th>Description</th>\n                            <th>Quantity</th>\n                            <th>Price</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {items && items.map((item) => <tr className='listItem' onClick={() => handleShow(item)} key={item.code}>\n                            <td>{item.code}</td>\n                            <td>{item.name}</td>\n                            <td>{item.quantity}</td>\n                            <td>{item.price}</td>\n                            <td>...</td>\n                        </tr>)}\n                    </tbody>\n                </table>\n                <label>Total: {total}</label>\n            </div>\n            <button type=\"button\" className=\"btn btn-primary\" onClick={reset}>Reset</button>\n        </div>{ show && <Modal handleClose={ handleClose } selectedItem={ selectedItem }>\n                        </Modal>}</>\n    )\n}\n\nexport default CheckoutView;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}